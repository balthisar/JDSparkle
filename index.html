<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>JDSparkle: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">JDSparkle
   &#160;<span id="projectnumber">v.2014-02-11</span>
   </div>
   <div id="projectbrief">Sparkle Updater Plugin for CakePHP</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">JDSparkle Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Easily add support for the Sparkle upgrade mechanism for Mac OS X applications to your CakePHP website. JDSparkle will:</p>
<ul>
<li>Serve your AppCast xml files to the Sparkle updater.</li>
<li>Serve your update notes to Sparkle clients via Cake standard view files using the template of your choice.</li>
<li>Log system profiling data to your database if provided as part of of the xml request.<ul>
<li>Supports any arbitrary tags in addition to Sparkle's defaults.</li>
</ul>
</li>
<li>Some rudimentary reporting of all system profiles with support for all data or a day-limited range. Also tries to limit results by unique IP address to help filter out frequent update checks.</li>
</ul>
<h2>Requirements </h2>
<p>Tested with configuration below, and may or may not work in earlier releases:</p>
<ul>
<li>PHP 5.2+</li>
<li>CakePHP 2.3+</li>
<li>A Sparkle-enhanced application for Mac OS X. Sparkle ports for other platforms should probably work as well.</li>
</ul>
<h2>API Documentation </h2>
<p><a href="http://balthisar.github.io/JDSparkle">http://balthisar.github.io/JDSparkle</a></p>
<h2>Installation </h2>
<h3>Download the zip file:</h3>
<ul>
<li>Download this: <a href="https://github.com/balthisar/CakePHP-JDSparkle/archive/master.zip">https://github.com/balthisar/CakePHP-JDSparkle/archive/master.zip</a></li>
<li>Unzip that download.</li>
<li>Move or copy the <code>JDSparkle</code> directory into your <code>app/Plugin directory</code>.</li>
</ul>
<h3>Or clone via github:</h3>
<p>If you’re aware of this option then I presume you already know how to use git and Github.</p>
<h3>And then load the plugin in your <code>app/Config/bootstrap.php</code> file:</h3>
<pre class="fragment">CakePlugin::load(array('JDSparkle' =&gt; array('routes' =&gt; true)));
</pre><h3>Finally setup your database:</h3>
<p>By defaults JDSparkle attempts to use the database connection <code>JDSparkleDB</code>, which is probably not setup in your database. You can either add it to your <code>app/Config/database.php</code> or change the <code>$useDbConfig</code> settings in the two model class files <code><a class="el" href="JDSparkleRecord_8php.html" title="Part of plugin JDSparkle ">JDSparkleRecord.php</a></code> and <code><a class="el" href="JDSparkleReport_8php.html" title="Part of plugin JDSparkle ">JDSparkleReport.php</a></code>.</p>
<p>Finally import the schema file from the CakePHP shell: </p>
<pre class="fragment">cake schema create --plugin JDSparkle
</pre><h3>Final Finally: Generate Fake Sample Data:</h3>
<p>If you'd like to generate some fake, sample data for testing the reporting features, you can (using the supplied default routing) navigate to <code><a href="http://www.example.com/softwareupdates/randomdata/secretpassword">http://www.example.com/softwareupdates/randomdata/secretpassword</a></code>.</p>
<h2>How to Use </h2>
<h3>First a note about security</h3>
<p>You should set up your own security system using CakePHP access control lists. For convenience JDSparkle ships with an unsafe password system that's sent as clear text. In the class file <code><a class="el" href="JDSparkleReportsController_8php.html" title="Part of plugin JDSparkle ">JDSparkleReportsController.php</a></code> you should set the variable <code>$secretpassword</code> to a null string to turn off this feature. If you'd like to use this feature on your testing server, then at least consider changing the default from "secretpassword" to something else.</p>
<h3>A note about sample code</h3>
<ul>
<li>The sample code will use <code>www.example.com</code> as the web host. Obviously use your own server.</li>
<li>The sample code will use <code>softwareupdates</code> as the main path to access the controller. You can considering changing this plugin's routes to point to any path that you want.</li>
<li>For admin type actions, they will be shown using the "secretpassword" as described above. Once you've set up your own authentication, simply omit the password from your URL's.</li>
</ul>
<h3>General Workflow</h3>
<ul>
<li>The application using Sparkle will check for updates using the url <code><a href="http://www.example.com/softwareupdates/updatecheck/appnameFile">http://www.example.com/softwareupdates/updatecheck/appnameFile</a></code>.<ul>
<li>Note the absence of the <code>.xml</code> extension.</li>
<li>This is the value you should place in the <code>SUFeedURL</code> in your application's <code>info.plist</code> file.</li>
<li>As currently implemented, JDSparkle will <em>not</em> log IP data for these types of requests.</li>
</ul>
</li>
<li>If you are collecting system profiling information then the suitable GET request will be similar to <code><a href="http://www.example.com/softwareupdates/updatecheck/appnameFile?appName=xxx&?">http://www.example.com/softwareupdates/updatecheck/appnameFile?appName=xxx&amp;?</a>…</code>.<ul>
<li>Note the absence of the <code>.xml</code> extension.</li>
<li>This is the value you should place in the <code>SUFeedURL</code> in your application's <code>info.plist</code> file.</li>
</ul>
</li>
<li>Your XML appcast files must be placed in the plugin's <code>View/AppCasts</code> directory as <code>appname.ctp</code>. See the section below about "Potential
  cause for confusion."<ul>
<li>Remember that <code>.ctp</code> files are PHP files. Some PHP configurations might interpret your <code>&lt;?xml</code> declaration as a PHP declaration and you will be unhappy. To be safe simply echo the <code>&lt;?xml</code> declaration with PHP.</li>
</ul>
</li>
<li>Your release notes must be placed in the plugin's <code>View/AppReleaseNotes</code> directory matching the what you have in the appcast XML <code>&lt;sparkle:releaseNotesLink&gt;</code> tag.<ul>
<li>The <code>&lt;sparkle:releaseNotesLink&gt;</code> tag should have the URL in a form similar to <code><a href="http://www.example.com/softwareupdates/releasenotes/appnameVersionXXX">http://www.example.com/softwareupdates/releasenotes/appnameVersionXXX</a></code>.</li>
<li>Again per Cake conventions the URL typically does not have a file extension, as this is just a normal CakePHP view.</li>
<li>The default CakePHP layout for these files is "blank.ctp" but you can change this in the controller.</li>
</ul>
</li>
<li>Finally the update package should be placed anywhere on your server that can be served via your CakePHP application, typically somewhere in <code>app/webroot</code>. There's no special configuration for this that's any different than Sparkle's normal configuration. That is, in your XML <code>&lt;enclosure</code> point to the update package just as your normally do.</li>
</ul>
<h4>Potential cause for confusion</h4>
<p>Note that above the use of "appnameFile" applies to URL request that Sparkle itself makes (and the file system representation). It is <b>not</b> specifically related to the "appName" request parameter that Sparkle will provide if you are using system profiling.</p>
<p>However the admin actions <b>do use</b> the "appName" request parameter in their requests, since this is how they're identified in the database.</p>
<h2>Actions Overview </h2>
<ul>
<li><code>updatecheck</code> as described above.</li>
<li><code>releasenotes</code> as described above.</li>
<li><code>randomdata</code> as described above.</li>
<li><code>overview</code> is an admin function that provides an overview of all of your apps' collect profiling information. It can be accessed at <code><a href="http://www.example.com/softwareupdates/overview/secretpassword">http://www.example.com/softwareupdates/overview/secretpassword</a></code>.</li>
<li><code>details</code> is an admin function that provides specific details for a single app for which JDSparkle has collected profiling information. Access it at <code><a href="http://www.example.com/softwareupdates/details/appname.app/secretpassword">http://www.example.com/softwareupdates/details/appname.app/secretpassword</a></code>.<ul>
<li>Note: in this case, the field <code>appname.app</code> is <em>not</em> the same as the appnameFile described further above. It is the value of the appName request parameter that Sparkle sends as part of the GET request when profiling is enabled.</li>
</ul>
</li>
</ul>
<h2>Please look at the source code (or Doxygen docs) </h2>
<p>The source code is fairly verbosely documented. You don’t have to understand the source code, but please read all of the comments at the top of the main files.</p>
<h2>License </h2>
<p>Copyright (c) 2013 by Jim Derry</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Feb 27 2014 10:59:41 for JDSparkle by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
